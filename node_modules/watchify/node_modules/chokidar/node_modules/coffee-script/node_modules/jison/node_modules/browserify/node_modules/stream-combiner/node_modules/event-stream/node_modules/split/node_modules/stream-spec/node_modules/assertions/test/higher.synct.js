
var higher = require('../higher')
  , assert = require ('assert')
  , render = require('render')

exports ['apply an assertion'] = function () {
  var called = 0
//  assert.doesNotThrow(function () {
    higher.apply(true, function (actual) {
      assert.equal(actual, true)
      called ++
    })
  //})
  assert.equal(called, 1)
}

exports ['apply an failing assertion'] = function () {
  var called = 0
  assert.throws(function () {
    higher.apply(false, function isTruthy (actual) {
      called ++
      assert.equal(actual, true)
      called ++ //should not evaluate
    })
  })
  assert.equal(called, 1)
}

exports ['throws does not throw if block does'] = function () {
  var called = 0
  try {
    higher.throws(function () {null.x = 10}, function () {}, 'if the block does not throw, throws must')
  } catch (err) {
    called ++
  }
  assert.equal(called, 0)
}

exports ['on throws the assertion argument is optional'] = function () {
  var called = 0
  try {
    higher.throws(function () {null.x = 10}, 'if the block does not throw, throws must')
  } catch (err) {
    assert.notEqual(err.type, 'called_non_callable')
    called ++
  }
  assert.equal(called, 0)
}


exports ['throws if the block throws the wrong thing'] = function () {

  var called = 0
  try {
    higher.throws(
      function () {null.x = 10}
    , function (err) {
          assert.equal(err, 'the wrong thing')
      }
    , 'if the block does not throw, throws must')
  } catch (err) {
    called ++
  }
  assert.equal(called, 1)

}


exports [